<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Physics Drag Simulator</title>
    <style>
      /* Your existing styles... */
      
      /* Audio Player Styles */
      #audio-player {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: #222;
        color: white;
        padding: 10px;
        border-radius: 8px;
        width: 350px;
        z-index: 1000;
        display: none; /* Hidden by default, shown in fullscreen */
      }
      #audio-player.visible {
        display: block;
      }
      #audio-controls {
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      #play-btn {
        font-size: 18px;
        padding: 5px 15px;
        border-radius: 4px;
        border: none;
        background: #444;
        color: white;
        cursor: pointer;
        margin: 0 auto;
      }
      .audio-slider {
        width: 100%;
      }
      .time-display {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>
    
    <!-- Audio Elements -->
    <audio id="main-audio" src="/sample-audio.mp3" preload="metadata"></audio>
    
    <div id="audio-player">
      <div id="audio-controls">
        <button id="play-btn">▶ Play</button>
        <div>
          <label>Volume:</label>
          <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1" class="audio-slider">
        </div>
        <div>
          <input type="range" id="progress-slider" min="0" max="0" step="0.01" value="0" class="audio-slider">
          <div class="time-display">
            <span id="current-time">0:00</span>
            <span id="duration">0:00</span>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Audio control logic
      document.addEventListener('DOMContentLoaded', () => {
        const audio = document.getElementById('main-audio');
        const playBtn = document.getElementById('play-btn');
        const volumeSlider = document.getElementById('volume-slider');
        const progressSlider = document.getElementById('progress-slider');
        const currentTimeDisplay = document.getElementById('current-time');
        const durationDisplay = document.getElementById('duration');
        const audioPlayer = document.getElementById('audio-player');

        // Toggle play/pause
        playBtn.addEventListener('click', () => {
          if (audio.paused) {
            audio.play();
            playBtn.textContent = '⏸ Pause';
          } else {
            audio.pause();
            playBtn.textContent = '▶ Play';
          }
        });

        // Volume control
        volumeSlider.addEventListener('input', (e) => {
          audio.volume = e.target.value;
        });

        // Progress control
        progressSlider.addEventListener('input', (e) => {
          audio.currentTime = e.target.value;
        });

        // Update time displays
        audio.addEventListener('timeupdate', () => {
          progressSlider.value = audio.currentTime;
          currentTimeDisplay.textContent = formatTime(audio.currentTime);
        });

        audio.addEventListener('loadedmetadata', () => {
          progressSlider.max = audio.duration;
          durationDisplay.textContent = formatTime(audio.duration);
        });

        audio.addEventListener('ended', () => {
          playBtn.textContent = '▶ Play';
        });

        // Format time helper
        function formatTime(seconds) {
          const mins = Math.floor(seconds / 60);
          const secs = Math.floor(seconds % 60);
          return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        // Make player draggable
        audioPlayer.addEventListener('mousedown', (e) => {
          if (e.target.tagName === 'INPUT') return;
          
          const startX = e.clientX;
          const startY = e.clientY;
          const startLeft = parseInt(window.getComputedStyle(audioPlayer).left);
          const startTop = parseInt(window.getComputedStyle(audioPlayer).top);

          function moveHandler(e) {
            audioPlayer.style.left = `${startLeft + e.clientX - startX}px`;
            audioPlayer.style.top = `${startTop + e.clientY - startY}px`;
          }

          function upHandler() {
            document.removeEventListener('mousemove', moveHandler);
            document.removeEventListener('mouseup', upHandler);
          }

          document.addEventListener('mousemove', moveHandler);
          document.addEventListener('mouseup', upHandler);
        });
      });
    </script>

    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>